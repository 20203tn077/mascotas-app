<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Mascotas</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/fontawesome.min.css}">
</head>
<body class="bg-light">
<nav class="navbar navbar-expand-lg bg-white shadow-sm sticky-top">
    <div class="container">
        <a class="navbar-brand" th:href="@{/mascotas/list/false}">Mascotas App</a>
        <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-bs-target="#navbarSupportedContent" data-bs-toggle="collapse" type="button">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" th:classappend="!${tipo} ? 'active' : ''" th:href="@{/mascotas/list/false}">Listado</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:classappend="${tipo} == 'Perro' ? 'active' : ''" th:href="@{/mascotas/list/Perro/false}">Perros</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:classappend="${tipo} == 'Gato' ? 'active' : ''" th:href="@{/mascotas/list/Gato/false}">Gatos</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="container my-4 vstack gap-3">
    <div class="d-flex justify-content-between align-items-center">
        <h3 class="m-0">Listado de <span class="text-lowercase" th:text="${tipo ?: 'mascota'}"/>s</h3>
        <a th:href="${tipo} ? @{/mascotas/new/{tipo}(tipo = ${tipo})} : @{/mascotas/new}" class="btn btn-success"><i class="fas fa-plus"></i>&nbsp;Registar <span class="text-lowercase" th:text="${tipo ?: 'mascota'}"/></a>
    </div>
    <div class="form-check form-switch">
        <input class="form-check-input" id="swDisponible" type="checkbox" role="switch" th:checked="${disponibles}" th:onclick="redirect([[${tipo} ? @{/mascotas/list/{tipo}/{disponibles}(disponibles = ${!disponibles}, tipo = ${tipo})} : @{/mascotas/list/{disponibles}(disponibles = ${!disponibles})}]])">
        <label class="form-check-label" for="swDisponible">Mostrar solo disponibles para adopción</label>
    </div>
    <div class="row g-3">
        <div class="col-sm-6 col-md-3" th:each="mascota: ${mascotas}" th:object="${mascota}">
            <div class="card shadow-sm">
                <img class="card-img-top" style="aspect-ratio: 3/2; object-fit: cover" th:src="@{/images/mascotas/{imagen}(imagen = *{imagen})}" alt="">
                <div class="card-body vstack gap-2">
                    <h5 class="m-0" th:text="*{nombre}"/>
                    <div>
                        <span class="badge text-bg-primary me-1" th:text="*{tipoMascota}"/>
                        <span class="badge" th:classappend="*{disponibleAdopcion ? 'text-bg-success' : 'text-bg-secondary'}" th:text="*{disponibleAdopcion ? 'Disponible para adopción' : 'No disponible'}"/>
                    </div>
                    <span th:text="*{descripcion}"/>
                    <p class="m-0"><span class="text-muted">Edad: </span>[[${mascota.edad}]] años</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- TOAST DE NOTIFICACIONES -->
<div class="toast-container position-fixed top-0 end-0 p-3">
    <div id="notification_toast" class="toast border-0 text-bg-success" role="alert">
        <div class="toast-body">
            <i class="fas fa-check me-2" id="notification_elIcon"></i><span id="notification_txtMessage"></span>
        </div>
    </div>
</div>

<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/js/mascotasController.js}"></script>
<script>if ([[${message != null}]]) notification.show('[[${message}]]', true)</script>
</body>
</html>